<div class="container">
  <nav class="sidenav">
    <div class="style-controls-header">
      <h2>Style Controls</h2>
      <button
        class="create-button"
        (click)="createDynamicComponent()"
        [ngClass]="{ pulse: !componentCreated }"
      >
        {{ buttonData }}
      </button>
    </div>

    <div class="controls-accordion">
      <div class="control-section">
        <h3 class="accordion-header" (click)="toggleSection('dimensions')">
          Dimensions
          <span class="accordion-icon">{{
            isExpanded["dimensions"] ? "−" : "+"
          }}</span>
        </h3>
        <div
          class="control-group"
          [ngClass]="{ expanded: isExpanded['dimensions'] }"
        >
          <div class="control-item">
            <label for="width">Width:</label>
            <div class="input-wrapper">
              <input
                id="width"
                type="text"
                [(ngModel)]="divStyles['width']"
                (input)="updateStyle('width', divStyles['width'])"
                placeholder="e.g., 200px"
              />
            </div>
          </div>
          <div class="control-item">
            <label for="height">Height:</label>
            <div class="input-wrapper">
              <input
                id="height"
                type="text"
                [(ngModel)]="divStyles['height']"
                (input)="updateStyle('height', divStyles['height'])"
                placeholder="e.g., 100px"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3 class="accordion-header" (click)="toggleSection('appearance')">
          Appearance
          <span class="accordion-icon">{{
            isExpanded["appearance"] ? "−" : "+"
          }}</span>
        </h3>
        <div
          class="control-group"
          [ngClass]="{ expanded: isExpanded['appearance'] }"
        >
          <div class="control-item">
            <label for="background-color">Background Color:</label>
            <div class="input-wrapper">
              <input
                id="background-color"
                type="text"
                [(ngModel)]="divStyles['background-color']"
                (input)="
                  updateStyle('background-color', divStyles['background-color'])
                "
                placeholder="e.g., #ff0000"
              />
              <input
                type="color"
                [ngModel]="divStyles['background-color']"
                (ngModelChange)="updateStyle('background-color', $event)"
                class="color-picker"
              />
            </div>
          </div>
          <div class="control-item">
            <label for="border">Border:</label>
            <div class="input-wrapper">
              <input
                id="border"
                type="text"
                [(ngModel)]="divStyles['border']"
                (input)="updateStyle('border', divStyles['border'])"
                placeholder="e.g., 1px solid #000000"
              />
            </div>
          </div>
          <div class="control-item">
            <label for="border-radius">Border Radius:</label>
            <div class="input-wrapper">
              <input
                id="border-radius"
                type="text"
                [(ngModel)]="divStyles['border-radius']"
                (input)="
                  updateStyle('border-radius', divStyles['border-radius'])
                "
                placeholder="e.g., 5px"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3 class="accordion-header" (click)="toggleSection('spacing')">
          Spacing
          <span class="accordion-icon">{{
            isExpanded["spacing"] ? "−" : "+"
          }}</span>
        </h3>
        <div
          class="control-group"
          [ngClass]="{ expanded: isExpanded['spacing'] }"
        >
          <div class="control-item">
            <label for="padding">Padding:</label>
            <div class="input-wrapper">
              <input
                id="padding"
                type="text"
                [(ngModel)]="divStyles['padding']"
                (input)="updateStyle('padding', divStyles['padding'])"
                placeholder="e.g., 10px"
              />
            </div>
          </div>
          <div class="control-item">
            <label for="margin">Margin:</label>
            <div class="input-wrapper">
              <input
                id="margin"
                type="text"
                [(ngModel)]="divStyles['margin']"
                (input)="updateStyle('margin', divStyles['margin'])"
                placeholder="e.g., 10px"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3 class="accordion-header" (click)="toggleSection('position')">
          Position
          <span class="accordion-icon">{{
            isExpanded["position"] ? "−" : "+"
          }}</span>
        </h3>
        <div
          class="control-group"
          [ngClass]="{ expanded: isExpanded['position'] }"
        >
          <div class="control-item">
            <label for="top">Top Position:</label>
            <div class="input-wrapper">
              <input
                id="top"
                type="text"
                [(ngModel)]="divStyles['top']"
                (input)="updateStyle('top', divStyles['top'])"
                placeholder="e.g., 0px"
              />
            </div>
          </div>
          <div class="control-item">
            <label for="left">Left Position:</label>
            <div class="input-wrapper">
              <input
                id="left"
                type="text"
                [(ngModel)]="divStyles['left']"
                (input)="updateStyle('left', divStyles['left'])"
                placeholder="e.g., 0px"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="preview-container">
    <ng-template *ngIf="!dataReceived" #dynamicComponentContainer></ng-template>
    <ng-template *ngIf="dataReceived" #dynamicContainer></ng-template>
  </div>
</div>
